{"ast":null,"code":"import Big from \"big.js\";\nimport operate from \"./operate\";\nimport isNumber from \"./isNumber\";\nexport default function calculate(obj, buttonName) {\n  if (buttonName === \"AC\") {\n    return {\n      total: null,\n      next: null,\n      operation: null\n    };\n  }\n\n  if (isNumber(buttonName)) {\n    if (buttonName === \"0\" && obj.next === \"0\") {\n      return { ...obj\n      };\n    }\n\n    if (obj.operation) {\n      if (obj.next) {\n        return { ...obj,\n          next: obj.next + buttonName\n        };\n      }\n\n      return { ...obj,\n        next: buttonName\n      };\n    }\n\n    if (obj.next) {\n      const next = obj.next === \"0\" ? buttonName : obj.next + buttonName;\n      return { ...obj,\n        next,\n        total: null\n      };\n    }\n\n    return { ...obj,\n      next: buttonName,\n      total: null\n    };\n  }\n\n  if (buttonName === \"%\") {\n    if (obj.operation && obj.next) {\n      const result = operate(obj.total, obj.next, obj.operation);\n      return {\n        total: Big(result).div(Big(\"100\")).toString(),\n        next: null,\n        operation: null\n      };\n    }\n\n    if (obj.next) {\n      return { ...obj,\n        next: Big(obj.next).div(Big(\"100\")).toString()\n      };\n    }\n\n    return { ...obj\n    };\n  }\n\n  if (buttonName === \".\") {\n    if (obj.next) {\n      if (obj.next.includes(\".\")) {\n        return { ...obj\n        };\n      }\n\n      return { ...obj,\n        next: obj.next + \".\"\n      };\n    }\n\n    return { ...obj,\n      next: \"0.\"\n    };\n  }\n\n  if (buttonName === \"=\") {\n    if (obj.next && obj.operation) {\n      return {\n        total: operate(obj.total, obj.next, obj.operation),\n        next: null,\n        operation: null\n      };\n    } else {\n      return { ...obj\n      };\n    }\n  }\n\n  if (buttonName === \"+/-\") {\n    if (obj.next) {\n      return { ...obj,\n        next: (-1 * parseFloat(obj.next)).toString()\n      };\n    }\n\n    if (obj.total) {\n      return { ...obj,\n        total: (-1 * parseFloat(obj.total)).toString()\n      };\n    }\n\n    return { ...obj\n    };\n  }\n\n  if (obj.operation) {\n    return {\n      total: operate(obj.total, obj.next, obj.operation),\n      next: null,\n      operation: buttonName\n    };\n  }\n\n  if (!obj.next) {\n    return { ...obj,\n      operation: buttonName\n    };\n  }\n\n  return {\n    total: obj.next,\n    next: null,\n    operation: buttonName\n  };\n}","map":{"version":3,"sources":["C:/Users/Usser/Documents/GitHub/calc/src/utils/calculate.js"],"names":["Big","operate","isNumber","calculate","obj","buttonName","total","next","operation","result","div","toString","includes","parseFloat"],"mappings":"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","sourcesContent":["import Big from \"big.js\";\n\nimport operate from \"./operate\";\nimport isNumber from \"./isNumber\";\n\nexport default function calculate(obj, buttonName) {\n  if (buttonName === \"AC\") {\n    return {\n      total: null,\n      next: null,\n      operation: null,\n    };\n  }\n\n  if (isNumber(buttonName)) {\n    if (buttonName === \"0\" && obj.next === \"0\") {\n      return {...obj};\n    }\n\n    if (obj.operation) {\n      if (obj.next) {\n        return { ...obj, next: obj.next + buttonName };\n      }\n      return { ...obj,next: buttonName };\n    }\n   \n    if (obj.next) {\n      const next = obj.next === \"0\" ? buttonName : obj.next + buttonName;\n      return {\n        ...obj,\n        next,\n        total: null,\n      };\n    }\n    return {\n      ...obj,\n      next: buttonName,\n      total: null,\n    };\n  }\n\n  if (buttonName === \"%\") {\n    if (obj.operation && obj.next) {\n      const result = operate(obj.total, obj.next, obj.operation);\n      return {\n        total: Big(result)\n          .div(Big(\"100\"))\n          .toString(),\n        next: null,\n        operation: null,\n      };\n    }\n    if (obj.next) {\n      return {\n        ...obj,\n        next: Big(obj.next)\n          .div(Big(\"100\"))\n          .toString(),\n      };\n    }\n    return {...obj};\n  }\n\n  if (buttonName === \".\") {\n    if (obj.next) {\n    \n      if (obj.next.includes(\".\")) {\n        return {...obj};\n      }\n      return { ...obj,next: obj.next + \".\" };\n    }\n    return {...obj, next: \"0.\" };\n  }\n\n  if (buttonName === \"=\") {\n    if (obj.next && obj.operation) {\n      return {\n        total: operate(obj.total, obj.next, obj.operation),\n        next: null,\n        operation: null,\n      };\n    } else {\n    \n      return {...obj};\n    }\n  }\n\n  if (buttonName === \"+/-\") {\n    if (obj.next) {\n      return { ...obj,next: (-1 * parseFloat(obj.next)).toString() };\n    }\n    if (obj.total) {\n      return { ...obj,total: (-1 * parseFloat(obj.total)).toString() };\n    }\n    return {...obj};\n  }\n\n  if (obj.operation) {\n    return {\n      total: operate(obj.total, obj.next, obj.operation),\n      next: null,\n      operation: buttonName,\n    };\n  }\n\n  if (!obj.next) {\n    return { ...obj,operation: buttonName };\n  }\n\n  return {\n    total: obj.next,\n    next: null,\n    operation: buttonName,\n  };\n}"]},"metadata":{},"sourceType":"module"}